# Kubernetes: bridge-worker

This module contains Kubernetes deployments for the Bridge Worker.

### Prerequisites

- Infrastructure components for the `mezo-<environment>` GCP project created using the
  corresponding Terraform module (make sure GKE version is >=1.29)
- `gcloud` installed and authorized to access the `mezo-<environment>` GCP project
- `kubectl` tool installed

### Secrets

One secret is used to set the configuration of the Bridge Worker component. To
create it, use the following command:
```Shell
kubectl create secret generic bridge-worker-config \
  --from-file=ethereum-account-key-file=<ETHEREUM_ACCOUNT_KEY_FILE> \
  --from-literal=ethereum-account-key-file-password=<ETHEREUM_ACCOUNT_KEY_FILE_PASSWORD> \
  --from-literal=ethereum-provider-url=<ETHEREUM_PROVIDER_URL> \
  --from-literal=ethereum-network=<ETHEREUM_NETWORK> \
  --from-literal=bitcoin-network=<BITCOIN_NETWORK> \
  --from-literal=bitcoin-electrum-url=<BITCOIN_ELECTRUM_URL> \
  --from-literal=mezo-assets-unlock-endpoint=<MEZO_ASSETS_UNLOCK_ENDPOINT>
```
where:
- `ETHEREUM_ACCOUNT_KEY_FILE` is the path to the encrypted Ethereum account key file (keystore file generated by geth)
- `ETHEREUM_ACCOUNT_KEY_FILE_PASSWORD` is the password of the Ethereum account key file
- `ETHEREUM_PROVIDER_URL` is the URL of the Ethereum provider (must be websocket)
- `ETHEREUM_NETWORK` is the network of the Ethereum provider (must be sepolia, mainnet, or developer)
- `BITCOIN_NETWORK` is the network of the Bitcoin provider (must be mainnet, testnet, or regtest)
- `BITCOIN_ELECTRUM_URL` is the URL of the Bitcoin Electrum server
- `MEZO_ASSETS_UNLOCK_ENDPOINT` is the endpoint of the Mezo assets unlock service (must be the gRPC endpoint of a mezod node)